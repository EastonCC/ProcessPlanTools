<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ProcessPlan Formula Formatter</title>
<style>
    /* --- Full CSS from your original page --- */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif; background: #191919; color: #e0e0e0; min-height: 100vh; }
    .header { display: flex; align-items: center; justify-content: space-between; padding: 12px 24px; border-bottom: 1px solid #333; }
    .header-left { display: flex; align-items: center; gap: 10px; }
    .status-dot { width: 10px; height: 10px; background: #3b82f6; border-radius: 50%; }
    .header-title { font-size: 15px; font-weight: 500; color: #e0e0e0; }
    .header-center { position: absolute; left: 50%; transform: translateX(-50%); }
    .home-btn { background: #2a2a2a; border: 1px solid #404040; color: #e0e0e0; padding: 6px 20px; border-radius: 20px; font-size: 14px; cursor: pointer; }
    .home-btn:hover { background: #333; }
    .header-right { display: flex; align-items: center; gap: 16px; }
    .search-btn { display: flex; align-items: center; gap: 8px; background: #2a2a2a; border: 1px solid #404040; color: #888; padding: 6px 16px; border-radius: 8px; font-size: 14px; cursor: pointer; }
    .header-icon { color: #888; font-size: 18px; cursor: pointer; }
    .avatar { width: 28px; height: 28px; background: #22c55e; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; color: white; }
    .main-content { max-width: 900px; margin: 0 auto; padding: 32px 24px; }
    .card { background: #232323; border: 1px solid #333; border-radius: 12px; margin-bottom: 16px; }
    .card-header { padding: 20px 24px; }
    .card-title-row { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
    .card-title { font-size: 20px; font-weight: 600; color: #fff; }
    .card-actions { display: flex; gap: 12px; color: #888; font-size: 14px; }
    .card-actions span { cursor: pointer; }
    .card-actions span:hover { color: #e0e0e0; }
    .card-description { color: #888; font-size: 14px; line-height: 1.6; margin-bottom: 8px; }
    .see-more { color: #666; font-size: 14px; cursor: pointer; }
    .see-more:hover { color: #888; }
    .card-footer { display: flex; justify-content: space-between; align-items: center; padding: 12px 24px; border-top: 1px solid #333; }
    .card-footer-left { display: flex; gap: 16px; color: #666; font-size: 18px; }
    .card-footer-right { color: #666; font-size: 14px; }
    .editor-card { background: #232323; border: 1px solid #333; border-radius: 12px; overflow: hidden; }
    .editor-row { display: flex; border-bottom: 1px solid #333; }
    .editor-row:last-child { border-bottom: none; }
    .editor-label { width: 200px; padding: 16px 24px; font-size: 14px; color: #e0e0e0; border-right: 1px solid #333; display: flex; align-items: flex-start; flex-shrink: 0; }
    .editor-content { flex: 1; padding: 0; }
    textarea { width: 100%; min-height: 150px; padding: 16px; background: transparent; border: none; color: #e0e0e0; font-family: 'SF Mono', 'Monaco', 'Consolas', monospace; font-size: 13px; resize: vertical; line-height: 1.5; }
    textarea:focus { outline: none; }
    textarea::placeholder { color: #555; }
    .output-container { min-height: 150px; padding: 16px; font-family: 'SF Mono', 'Monaco', 'Consolas', monospace; font-size: 13px; line-height: 1.5; overflow: auto; }
    pre { margin: 0; white-space: pre-wrap; word-wrap: break-word; }
    .button-row { display: flex; border-bottom: 1px solid #333; }
    .btn { flex: 1; padding: 14px 24px; font-size: 14px; font-weight: 500; border: none; cursor: pointer; transition: background 0.2s; border-right: 1px solid #333; }
    .btn:last-child { border-right: none; }
    .btn-primary { background: #3b82f6; color: white; }
    .btn-primary:hover { background: #2563eb; }
    .btn-secondary { background: #2a2a2a; color: #e0e0e0; }
    .btn-secondary:hover { background: #333; }
    .function { color: #4ade80; font-weight: 500; }
    .string { color: #f97316; }
    .number { color: #60a5fa; }
    .operator { color: #e0e0e0; }
    .parenthesis { color: #888; }
    .bracket { color: #a78bfa; }
    .notification { position: fixed; top: 20px; right: 20px; padding: 12px 20px; background: #22c55e; color: white; border-radius: 8px; font-size: 14px; font-weight: 500; opacity: 0; transform: translateY(-10px); transition: all 0.3s; pointer-events: none; }
    .notification.show { opacity: 1; transform: translateY(0); }
    .notification.error { background: #ef4444; }
    @media (max-width: 768px) {
        .editor-row { flex-direction: column; }
        .editor-label { width: 100%; border-right: none; border-bottom: 1px solid #333; padding: 12px 16px; }
        .header-center { display: none; }
        .sidebar { width: 280px !important; }
    }
    .sidebar { position: fixed; top: 0; right: -350px; width: 350px; height: 100vh; background: #232323; border-left: 1px solid #333; transition: right 0.3s ease; z-index: 1000; display: flex; flex-direction: column; }
    .sidebar.open { right: 0; }
    .sidebar-header { padding: 16px 20px; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
    .sidebar-title { font-size: 16px; font-weight: 600; color: #fff; }
    .sidebar-close { background: none; border: none; color: #888; font-size: 24px; cursor: pointer; padding: 0; line-height: 1; }
    .sidebar-close:hover { color: #fff; }
    .sidebar-search { padding: 12px 20px; border-bottom: 1px solid #333; }
    .sidebar-search input { width: 100%; padding: 10px 12px; background: #191919; border: 1px solid #404040; border-radius: 6px; color: #e0e0e0; font-size: 14px; }
    .sidebar-search input:focus { outline: none; border-color: #3b82f6; }
    .sidebar-search input::placeholder { color: #666; }
    .sidebar-content { flex: 1; overflow-y: auto; padding: 8px 0; }
</style>
</head>
<body>

<div class="header">
    <div class="header-left">
        <div class="status-dot"></div>
        <span class="header-title">Formula Formatter</span>
    </div>
</div>

<button class="toggle-sidebar-btn" onclick="toggleSidebar()"><span>ðŸ“š</span> Functions</button>
<div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
<div class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <span class="sidebar-title">Function Reference</span>
        <button class="sidebar-close" onclick="toggleSidebar()">Ã—</button>
    </div>
    <div class="sidebar-search">
        <input type="text" id="functionSearch" placeholder="Search functions..." oninput="filterFunctions()">
    </div>
    <div class="sidebar-content" id="functionList"></div>
</div>

<div class="main-content">
    <div class="card">
        <div class="card-header">
            <div class="card-title-row">
                <h1 class="card-title">Formula Formatter</h1>
            </div>
            <p class="card-description">Format your ProcessPlan formulas with indentation and function highlighting for easier reading and debugging.</p>
        </div>
    </div>

    <div class="editor-card">
        <div class="button-row">
            <button class="btn btn-primary" onclick="formatFormula()">Format Formula</button>
            <button class="btn btn-secondary" onclick="copyToClipboard()">Copy to Clipboard</button>
            <button class="btn btn-secondary" onclick="clearAll()">Clear All</button>
        </div>

        <div class="editor-row">
            <div class="editor-label">Input Formula</div>
            <div class="editor-content"><textarea id="input" placeholder="Enter your formula here..."></textarea></div>
        </div>

        <div class="editor-row">
            <div class="editor-label">Formatted Output</div>
            <div class="editor-content"><div class="output-container"><pre id="formatted-code"></pre></div></div>
        </div>
    </div>
</div>

<div id="notification" class="notification"></div>

<script src="formulaFormatter.js"></script>
</body>
</html>
